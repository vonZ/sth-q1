/*! angular-grunt-foundation 2016-02-15 */
var app=angular.module("sthlmHar",["ui.router"]);app.controller("aboutUsPageController",["$scope","$http",function(a,b){console.log("Inne i aboutusPageController")}]),app.controller("mainController",["$scope","$http",function(a,b){console.log("Inne i mainCtrl")}]),app.controller("startPageController",["$scope","$http","instagram",function(a,b,c){console.log("Inne i startPageController"),a.instaTokenVvZ="20902211",a.instaTokenSth="406306036",a.instaTokenNN="6847274",a.initInsta=function(){console.log("initInsta"),$("#InstaContainer").instastream({instaToken:"20902211.1677ed0.328409468c4b440d87971179adb2e4dd",instaUser:a.instaTokenVvZ,instaResults:10,instaMenu:"yes"})}}]),app.directive("loading",function(){return{restrict:"E",replace:!0,template:'<div class="respCenter loading"><span>Laddar</span><img src="images/ajax-loader.gif" class="respCenterIcon"/></div>',link:function(a,b,c){a.$watch("loading",function(a){a?$(b).show():$(b).hide()})}}}),app.factory("posts",["$http",function(a){var b={posts:[]};return b.get=function(b){return console.log("get post"),a.get("/posts/"+b).then(function(a){return a.data})},b.getAll=function(){return console.log("get all posts"),a.get("/posts/").success(function(a){angular.copy(a,b.posts)})},b.create=function(c){return a.post("/posts",c).success(function(a){console.log("data: ",a),b.posts.push(a)})},b.upvote=function(b){return a.put("/posts/"+b._id+"/upvote").success(function(a){b.upvotes+=1})},b.deleteItem=function(b){return a.put("/posts/"+b._id+"/delete").success(function(a){console.log("success!")})},b.addComment=function(b,c){return console.log("add comment"),a.post("/posts/"+b+"/comments",c)},b.upvoteComment=function(b,c){return a.put("/posts/"+b._id+"/comments/"+c._id+"/upvote").success(function(a){c.upvotes+=1})},b}]),app.factory("instagram",["$http",function(a){return{fetchPhotos:function(b){var c="66bb9475b77d4f6e846384c2ea92179e",d="https://api.instagram.com/v1/users/20902211/media/recent/?";d+="?count=99",d+="&client_id="+c,d+="&callback=JSON_CALLBACK",a.jsonp(d).success(function(a){b(a.data)})}}}]),app.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("/home"),a.state("home",{url:"/home",templateUrl:"partials/startPage.html",controller:"startPageController"}).state("about",{url:"/om-oss",templateUrl:"partials/aboutUs.html",controller:"aboutUsPageController"}).state("findUs",{url:"/hitta-hit",templateUrl:"partials/findUs.html",controller:"aboutUsPageController"}).state("prices",{url:"/priser",templateUrl:"partials/prices.html",controller:"aboutUsPageController"})}]);var initSlider=function(){console.log("initSlider");var a=$("#owl-demo");a.owlCarousel({autoPlay:!1,items:4,itemsDesktop:[1199,3],itemsDesktopSmall:[979,3]}),$(".next").click(function(){a.trigger("owl.next")}),$(".prev").click(function(){a.trigger("owl.prev")})};!function(a,b,c){function d(b,c){this.element=b,this.options=a.extend({},i,c),this._defaults=i,this._name=g,this.init()}var e,f,g="instastream",h=b.document,i={instaUser:"1011689",instaResults:3,instaMenu:"yes"},j=0;String.prototype.timeconverter=function(){var a=new Date(1e3*this),b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],c=a.getFullYear(),d=b[a.getMonth()],e=a.getDate(),f=e+" "+d+" "+c;return f},a.fn.createStream=function(b,c){var d,g,i,l=b;a(c).addClass("slider-wrapper").append("<div class='loading'></div>"),a("div").remove(".slider-content"),a("div").remove(".slider-menu"),a.ajax({type:"GET",dataType:"jsonp",cache:!1,url:f,success:function(b){console.log("data: ",b),a(c).append("<div id='owl-demo' ng-init='initSlider()'></div>");for(var f=0;e>f;f++)20>l&&(d=null===b.data[l].caption?"":b.data[l].caption.text,g=b.data[l].comments.count<2?" kommentar":" kommentarer",i=b.data[l].likes.count<2?" like":" likes",a("#owl-demo").append("<div class='item'><a href='"+b.data[l].link+"'target='_blank'><img class='img-responsive' src='"+b.data[l].images.standard_resolution.url+"' alt='"+d+"'><div class='reactionContainer'><span><p><i class='fa fa-heart '></i>"+b.data[l].likes.count+i+"</p><p><i class='fa fa-comments-o'></i>"+b.data[l].comments.count+"</i>"+g+"</p><p><i class='fa fa-clock-o'></i>"+b.data[l].created_time.timeconverter()+"</i></p></span></div></a></div>"),l++,j=l);a(".prevInsta").on("click",function(b){b.preventDefault();var d=j-2*e;a().createStream(d,c)}),a(".nextInsta").on("click",function(b){b.preventDefault();var d=j;a().createStream(d,c)})}}).done(function(){a(".slider-item").hide(),a(".frame").find("span.frame-more").hide(),a(".frame").find("span.frame-title").hide(),a(".frame").hover(function(){a(this).find("span.frame-more").show().animate({top:-5},{queue:!1,duration:200}),a(this).find("span.frame-title").show().animate({bottom:0},{queue:!1,duration:200})},function(){a(this).find("span.frame-more").show().animate({top:-38},{queue:!1,duration:200}),a(this).find("span.frame-title").show().animate({bottom:-50},{queue:!1,duration:200})});"yes"==$instaMenu&&(j>19?a(".next").hide():a(".next").show()),a("div").remove(".loading");for(var b=0;e>b;b++)k=b+1,a("#slider-item"+b).delay(200*k).fadeIn(800);a(h).ready(function(){initSlider()})})},d.prototype.init=function(){j=0,e=this.options.instaResults,$instaMenu=this.options.instaMenu,f="https://api.instagram.com/v1/users/"+this.options.instaUser+"/media/recent/?access_token="+this.options.instaToken;var b=this.element;a().createStream(j,b)},a.fn[g]=function(b){return this.each(function(){a.data(this,"plugin_"+g)||a.data(this,"plugin_"+g,new d(this,b))})}}(jQuery,window);